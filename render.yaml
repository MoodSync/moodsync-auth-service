services:
- type: web
  name: fastapi-auth-otp
  runtime: python
  buildCommand: pip install -r requirements.txt
  startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: auth_db
      property: connectionString
  - key: SECRET_KEY
    generateValue: true
  - key: ALGORITHM
    value: HS256
  - key: ACCESS_TOKEN_EXPIRE_MINUTES
    value: 30
  - key: DEBUG
    value: "false"

databases:
- name: auth_db
  databaseName: auth_db
  user: auth_user
  plan: free
